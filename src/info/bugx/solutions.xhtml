<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta name="generator"
      content="HTML Tidy for Java (vers. 2009-12-01), see jtidy.sourceforge.net" />
      <title>
         Solutions actuelles
      </title>
      <meta http-equiv="Content-Type"
      content="application/xhtml+xml; charset=UTF-8" />
      <meta name="author" content="Eric Buist" />
      <meta name="viewport"
      content="width=device-width, initial-scale=1.0" />
      <meta name="HandheldFriendly" content="true" />
      <link rel="stylesheet" type="text/css"
      href="../../main.css" />
   </head>
   <body>
      <table class="topnavbar" width="100%">
         <tr>
            <td class="parents" colspan="3">
               <a href="../../index.xhtml" class="parents">Le
               royaume de Eric Buist</a> &gt;&gt; <a
               href="../index.xhtml"
               class="parents">Informatique</a> &gt;&gt; Problèmes
               marquants &gt;&gt; <a href="index.xhtml"
               class="parents">Le bugX</a>
            </td>
         </tr>
         <tr>
            <td class="contact">
               <a href="../../contact.xhtml" class="contact">Me
               contacter</a>
            </td>
            <td class="topnavbar">
            </td>
            <td class="sitemap">
               <a href="../../sitemap.xhtml" class="sitemap">Plan
               du site</a>
            </td>
         </tr>
         <tr>
            <td class="leftsibling">
               &lt;&lt; <a href="limits.xhtml"
               class="leftsibling">Ce qui m'empêche d'agir</a>
            </td>
            <td class="thispage">
               Solutions actuelles
            </td>
            <td class="rightsibling">
            </td>
         </tr>
      </table>
      <h1>
         Solutions actuelles
      </h1>
      <p>
         Entrons maintenant dans le vif du sujet avec les
         principales solutions informatiques trouvées pour le bugX.
         Au tout début, il n'existait rien de prévu pour les
         changements localisés. Je recherchais plutôt une méthode
         générale afin de parvenir à un résultat durable, adaptable
         à de nouveaux logiciels si nécessaire.
      </p>
      <h1>
         Netscape, vous êtes déclaré coupable d'inaccessibilité!
      </h1>
      <p>
         Ma nouvelle installation de Linux m'a fait voir que
         Netscape affichait les polices dans une taille
         anormalement petite, plus petite que sous Windows en tout
         cas. Heureusement, une modification dans les préférences
         permet de retrouver une taille plus normale et solutionne
         partiellement le problème. Les caractères passent du quasi
         indéchiffrable au déchiffrable, mais la résolution
         complique malgré tout l'accessibilité.
      </p>
      <p>
         <img src="nsfnt.png"
         alt="Fenêtre ses préférences de Netscape avec un changement de police adéquat pour moi" />
      </p>
      <h1>
         StarOffice
      </h1>
      <p>
         Cette suite d'applications constitue un équivalent gratuit
         de la fameuse suite Microsoft Office. On y trouve un
         traitement de texte, un tableur, un logiciel de
         présentation et d'autres gadgets encore. Utiliser le
         traitement de texte peut être nécessaire pour faire un
         rapport avec un coéquipier ne connaissant pas LaTeX, que
         je privilégie bien entendu pour la qualité du document en
         sortie. Il m'a aussi été nécessaire, lors de mon stage,
         d'utiliser StarCalc afin de dresser un tableau des
         résultats de mes expérimentations.
      </p>
      <p>
         Malheur! Toutes les polices de ce logiciel se trouvent un
         peu petites, mais il me semblait, jusqu'à la semaine du 20
         août 2001, n'y avoir aucun moyen d'y remédier. Toutefois,
         la commande Options du menu Outils contient la solution!
         Dans la branche générale, feuille Affichage se trouve la
         clé.
      </p>
      <p>
         <img src="sofnt.png"
         alt="Paramètres d'affichage de StarOffice" />
      </p>
      <p>
         J'ai découvert qu'une augmentation de l'échelle à plus de
         100% provoquait un grossissement généralisé des polices du
         programme, ce qui était loin de me déplaire... J'ai aussi
         coché Grandes icônes et décoché Icônes plates.
      </p>
      <h1>
         Les polices de l'environnement X
      </h1>
      <p>
         Que ce soit GNOME ou KDE, il est toujours possible
         d'effectuer un changement de taille des polices du
         système. Ainsi, l'environnement, ie le bureau et
         l'explorateur de fichiers, subissent le changement.
         Malheureusement, KDE ne veut pas agrandir la police plus
         haut que 16, ce qui n'est pas tout à fait suffisant.
         Encore une fois, on a un palliatif plutôt qu'une solution
         définitive.
      </p>
      <h1>
         Les polices de Konsole
      </h1>
      <p>
         Il a suffi de mettre la police sur Huge et de sauvegarder
         les options pour solutionner complètement le problème de
         la console X, celle qui permet d'entrer des commandes au
         shell. Le shell constitue la clé de voûte dans ma
         tentative de contourner le bogue le plus longtemps
         possible, aussi longtemps qu'il le faudra pour parvenir à
         une solution définitive.
      </p>
      <p>
         Malheureusement, lors de mon stage au RALI, je me suis
         rendu compte que Huge ne suffisait pas et que je ne
         pouvais monter à plus haut! L'application Konsole est
         ainsi incorrecte, il m'a fallu changer pour un terminal
         équivalent, XTerm.
      </p>
      <h1>
         Le problème des pointeurs de souris
      </h1>
      <p>
         Dans un mini-howto du nom de X-Big-Cursor, j'ai découvert
         une technique relativement simple permettant de multiplier
         par un facteur X entier la taille des pointeurs de souris.
         Ce qui m'apportera déjà une aide précieuse, diminuant
         l'énergie dépensée à localiser le petit pointeur et
         l'amener à l'endroit voulu. En fait, je ne diminue que les
         chances de le perdre de vue du point A vers le point B.
         Cette perte de vue m'oblige alors à ramener l'objet
         virtuel dans le coin supérieur gauche de l'écran et
         recommencer l'opération de positionnement.
      </p>
      <p>
         Linux possède une modularité supérieure à celle de
         Windows. En effet, l'interface graphique, X Window System
         (X), est séparée du noyau système. C'est pour cela que
         Linux n'a pas baissé dans mon estime en raison du bugX!
         Seul X est en cause, et non pas le kernel ainsi que les
         puissants outils en ligne de commande. Pour afficher du
         texte, le serveur X utilise des polices au format PCF. Ces
         polices constituent un ensemble d'images décrivant les
         caractères à afficher ainsi que des masques indiquant au
         système quelles portions de l'arrière-plan modifier et
         quelles portions laisser intactes. Cela permet l'affichage
         d'un caractère, et non pas d'un rectangle plein contenant
         l'image de ce caractère. Grâce au mini-howto, j'ai appris
         que les curseurs constituaient eux aussi des polices de
         caractères.
      </p>
      <p>
         Pour appliquer la modification, il m'a fallu télécharger
         le fichier police source au format BDF puis utiliser un
         utilitaire nommé <tt>bdfresize</tt> et capable de doubler
         la taille de ce fichier source. La sortie du programme est
         ensuite envoyée à un autre programme, <tt>bdftopcf</tt>,
         qui fait de ce fichier source un fichier PCF directement
         utilisable par le serveur X. Le fichier PCF résultant doit
         ensuite être placé dans un répertoire puis la commande
         <tt>mkfontdir</tt> doit être utilisée sur ce dernier.
      </p>
      <p>
         <a href="cursorsfonts.tar.gz">Répertoire
         <tt>fonts</tt></a> contenant les curseurs en taille
         double.
      </p>
      <p>
         Dans un quelconque script d'initialisation de X, il faut
         ensuite indiquer au serveur où aller chercher cette
         version modifiée de la police, c'est-à-dire ajouter le
         répertoire contenant le curseur agrandi dans la font path.
         La commande <tt>xset +fp &lt;répertoire&gt;</tt> effectue
         l'ajout avant tous les autres utilisés par X. Il faudra
         l'appeler dans un script de démarrage, car c'est à refaire
         à chaque fois, ainsi que pour <tt>xsetroot -cursor_name
         X_cursor</tt>. Cette dernière indique à X d'utiliser la
         nouvelle police et provoque la modification effective.
      </p>
      <p>
         Malheureusement, on ne peut pas dire «It just works!» et
         en rester là! L'appel à <tt>xsetroot</tt> doit s'effectuer
         avant le chargement de toute application, car les
         modifications ne s'appliquent qu'aux curseurs nouvellement
         créés. Sur une machine dont je suis le maître, aucun
         problème. Toutefois, il en sera tout autrement lors de ma
         session...
      </p>
      <p>
         Il faut que les deux commandes soient appelées avant le
         chargement de KDE! Lors de mon stage, j'ai fini par
         découvrir une façon d'y parvenir. Après avoir entré mon
         login et seulement après, je choisissais Failsafe comme
         type de login puis je tapais mon mot de passe. Failsafe
         était mémorisé pour la prochaine fois et dès que
         j'entrerais mon login, il reviendrait à cette option. Elle
         fait surgir un XTerm avec polices miniatures, mais duquel
         je pouvais appeler un script appliquant les modifications
         pour les curseurs puis <tt>startkde</tt> pour charger KDE.
      </p>
      <p>
         Mais c'était très tannant, car cela créait une fenêtre
         inutilisable qui pouvait se rouvrir lors de commutations
         par la touche Alt-Tab et si je la fermais, ma session X y
         passait! Il fallait donc mieux. Au lieu de me logger en
         Failsafe, je me suis aperçu qu'il était plus judicieux de
         me logger en default. Dans ce mode de branchement, ce
         n'est pas <tt>startkde</tt> qui part mais plutôt
         <tt>~/.Xclients</tt>. Ce script doit être accessible en
         lecture et en exécution pour tous les utilisateurs
         (<tt>chmod a+rx ~/.Xclients</tt>) afin que le démarrage se
         fasse bien. Ce script est nul autre qu'un shell script qui
         doit appeler, au bout du compte, un Window Manager, sinon
         cela va se bloquer. Dans mon cas, il initialise les
         curseurs puis appelle <tt>exec startkde</tt>, ce qui
         remplace le shell exécutant le script par KDE. Lorsque KDE
         sera fermé, X le sera aussi, c'est ce que l'on souhaite.
      </p>
      <h1>
         X-Big-Cursor généralisé
      </h1>
      <p>
         Si on comprend bien ce qui s'est passé avec les curseurs
         et si on a l'hypothèse que les polices utilisées par X
         sont au même format que celles des curseurs de souris, on
         en arrive à la conclusion qu'il est possible de multiplier
         par un facteur X entier plus grand que un TOUTES les
         polices du sytème! Bien entendu, comme avec les curseurs,
         la modification ne s'appliquera qu'aux clients
         nouvellement créés. Dans le but de vérifier cette
         hypothèse qui constitue une véritable lumière d'espoir,
         j'ai écrit un programme appelant en série
         <tt>bdfresize</tt> et <tt>bdftopcf</tt>. Toutefois, un
         problème est vite apparu: comment obtenir les versions BDF
         des polices PCF sur le système? Heureusement, avec
         fstobdf, cela devenait possible. Le programme a toutefois
         généré une énorme quantité de fichiers totalisant plus de
         30MB! Avec la compression, j'ai pu diminuer ce poids lourd
         à une vingtaine de méga-octets, mais cela ne suffisait
         pas. Toutefois, cela fonctionnait aussi bien qu'avec les
         curseurs. Certaines polices n'ont pas pu être converties,
         mais celles utilisées par les applications testées
         l'avaient été.
      </p>
      <p>
         Bien entendu, il a fallu mettre les fichier PCF dans un
         répertoire fonts personnel et appeler <tt>mkfontdir</tt>
         dessus pour créer le fameux fichier de données. Pour
         terminer, sur un réseau, cette méthode n'est pas adéquate,
         car une mise à jour des polices de Linux ne sera pas
         automatiquement répercutée dans le répertoire analogue
         agrandi. Finalement, tous ces fichiers grugeront
         sérieusement les 30MB à ma disposition sur le système, me
         confrontant à une lutte éperdue et constante pour l'espace
         disque, et cela pour la durée de mon baccalauréat! Je me
         suis rendu compte qu'il n'y a aucune restriction logiciel
         quant à l'espace disque (quotas), mais trop dépasser
         m'attirerait les foudres du support technique. De plus, X
         supporte d'autres formats de polices que les PCF qui ne
         seront pas pris en charge par la méthode. Il faut donc
         creuser un peu plus.
      </p>
      <h1>
         X Font Server et la solution ultime
      </h1>
      <p>
         Outre des répertores locaux, X peut aussi utiliser un
         serveur comme réserve de polices d'affichage. On nomme ce
         serveur X Font Server (XFS) et il est chargé par des
         scripts de démarrage. Toutefois, rien ne nous empêche de
         démarrer une version personnelle de ce serveur sur un
         autre port, non?
      </p>
      <p>
         Lorsque XFS reçoit une requête de police, il va fouiller
         dans une série de chemins d'accès prédéfinis et va
         retourner la police désirée, s'il la trouve naturellement.
         Mais si on isolait le code source de XFS du source de
         XFree, seule distribution open source de X, et qu'on lui
         appliquait une petite modification? Maintenant, le
         programme appliquerait, d'une façon ou d'une autre, le
         grossissement de facteur X avant d'envoyer la police à
         l'application. Implémenter un cache sera une nécessité
         pour éviter une sévère baisse de performance du système
         due à une conversion massive et répétée. Pour faire
         fonctionner le joujou, il me faudra compiler le source
         dans mon compte puis exécuter le programme sur un autre
         port, comme 1234 par exemple. Espérons qu'un firewall ne
         viendra pas empêcher le XFS de fonctionner! Puisque le
         programme serait compilé puis exécuté dans mon répertoire
         usager, aucune modification en root n'est nécessaire.
      </p>
      <p>
         Malheureusement, le code source s'est avéré trop complexe
         pour que je parvienne à trouver où placer la modification
         sans rendre le programme inutilisable ou instable. Une
         analyse méticuleuse sera nécessaire et il me faudra
         beaucoup de courage pour l'entreprendre.
      </p>
      <p>
         On a donc ici la formule chimique de l'antidote à ce
         terrible bugX, mais les moyens techniques pour synthétiser
         les molécules brillent par leur absence! Le pouvoir Open
         Source constitue la seule solution au problème, mais il
         est aussi extrêmement difficile à appliquer pour une
         personne comme moi qui ne détient pas un diplôme en
         informatique et les connaissances qui vont avec.
      </p>
      <h1>
         Les palliatifs les plus durables
      </h1>
      <p>
         Pour le moment, le remède immédiat consiste à me procurer
         les logiciels sur lesquels on va travailler pour les
         cours. Cela m'a obligé à faire l'achat de LogicWorks, mais
         m'a rendu de grands services pour la remise à temps du
         devoir 2 en Architecture des Ordinateurs 1 (IFT1213). Pour
         le moment, mon ordinateur reste le meilleur environnement
         pour découvrir un nouveau logiciel. Cet apprentissage
         provoque parfois (souvent, même) de terribles frustrations
         qu'il vaudrait mieux ne pas faire entendre sur le campus!
         C'est pourquoi la solution du bugX, même l'ultime, ne
         changera pas cet état des choses.
      </p>
      <p>
         Un palliatif important constitue à faire fonctionner
         XEmacs ainsi que XTerm. Ce qui me fournit un excellent
         éditeur de texte ainsi qu'un console dans laquelle Pine
         peut tourner. Pour parvenir à ce résultat, le fichier
         <tt>~/.Xresources</tt> a été créé et modifié. Ce fichier
         contient des paramètres que les applications X peuvent
         utiliser. Voici les lignes salvatrices de ce fichier.
      </p>
<pre>
xterm*font: -bitstream-courier-medium-r-normal-*-24-200-75-*-*-*-iso8859-*
xterm*background: black
xterm*foreground: white
xterm*geometry: 80x25
 
emacs*font: -bitstream-courier-medium-r-normal-*-24-200-75-*-*-*-iso8859-*
emacs*geometry: 80x25
 
xemacs.geometry: 80x20
xemacs*font: -bitstream-courier-medium-r-normal-*-24-200-75-*-*-*-iso8859-*
xemacs.background: white
</pre>
      <p>
         La police utilisée a été trouvée de peine et de misère
         grâce à l'application <tt>xfontsel</tt>, écrite avec Xaw
         et fonctionnant avec la souris seulement. Fixer les
         dimensions des fenêtres d'application s'avérait
         nécessaire, car dans le cas contraire, j'obtenais des
         fenêtres beaucoup trop grandes qui dépassaient largement
         l'écran.
      </p>
      <p>
         Finalement, grâce à Telnet, je peux utiliser tous les
         outils en mode texte du DIRO, y compris les potentiels
         logiciels commerciaux que je ne pourrais jamais avoir
         s'ils sont trop dispendieux. Mieux encore, depuis que j'ai
         installé Linux sur ma propre machine, je dispose d'un
         serveur X et si je me branche par SSH (<tt>ssh
         usager@serveur</tt>), je peux appeler une application X et
         voir une fenêtre sur ma machine!
      </p>
      <div class="footer">
         <a href="http://validator.w3.org/check?uri=referer"><img
         src="http://www.w3.org/Icons/valid-xhtml10"
         alt="Valid XHTML" height="31" width="88" /></a><a
         href="http://jigsaw.w3.org/css-validator/check/referer"><img
          src="http://jigsaw.w3.org/css-validator/images/vcss"
         alt="Valid CSS" height="31" width="88" /></a>
      </div>
   </body>
</html>

