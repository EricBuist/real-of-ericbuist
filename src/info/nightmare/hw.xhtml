<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta name="generator"
      content="HTML Tidy for Java (vers. 2009-12-01), see jtidy.sourceforge.net" />
      <title>
         Particularités de la machine choisie
      </title>
      <meta http-equiv="Content-Type"
      content="application/xhtml+xml; charset=UTF-8" />
      <meta name="author" content="Eric Buist" />
      <meta name="viewport"
      content="width=device-width, initial-scale=1.0" />
      <meta name="HandheldFriendly" content="true" />
      <link rel="stylesheet" type="text/css"
      href="../../main.css" />
   </head>
   <body>
      <table class="topnavbar" width="100%">
         <tr>
            <td class="parents" colspan="3">
               <a href="../../index.xhtml" class="parents">Le
               royaume de Eric Buist</a> &gt;&gt; <a
               href="../index.xhtml"
               class="parents">Informatique</a> &gt;&gt;
               Configuration informatique &gt;&gt; <a
               href="index.xhtml" class="parents">Le Nightmare,
               second du Salvator</a>
            </td>
         </tr>
         <tr>
            <td class="contact">
               <a href="../../contact.xhtml" class="contact">Me
               contacter</a>
            </td>
            <td class="topnavbar">
            </td>
            <td class="sitemap">
               <a href="../../sitemap.xhtml" class="sitemap">Plan
               du site</a>
            </td>
         </tr>
         <tr>
            <td class="leftsibling">
               &lt;&lt; <a href="sel.xhtml"
               class="leftsibling">Sélection de la machine</a>
            </td>
            <td class="thispage">
               Particularités de la machine choisie
            </td>
            <td class="rightsibling">
               <a href="win.xhtml" class="rightsibling">Windows
               XP</a> &gt;&gt;
            </td>
         </tr>
      </table>
      <h1>
         Particularités de la machine choisie
      </h1>
      <p>
         Le portable est sommes toutes assez standard avec son
         écran refermable, son clavier et sa tablette servant de
         souris. Il dispose de tous les ports de connexion
         habituels et d'un lecteur de cartes 5 en 1. Voici
         maintenant les particularités de cette machine que j'ai
         trouvées les plus marquantes. Pour plus d'informations,
         voir le manuel du propriétaire, en format PDF, qui se
         trouve installé sur le disque dur de la machine.
      </p>
      <ul>
         <li>
            <a href="#front">L'avant</a>
         </li>
         <li>
            <a href="#cover">Sous le couvercle</a>
         </li>
         <li>
            <a href="#left">Côté gauche</a>
         </li>
         <li>
            <a href="#right">Côté droit</a>
         </li>
         <li>
            <a href="#back">Arrière</a>
         </li>
         <li>
            <a href="#under">Dessous</a>
         </li>
         <li>
            <a href="#inside">Intérieur</a>
         </li>
         <li>
            <a href="#soft">Configuration logicielle</a>
         </li>
         <li>
            <a href="#mediadirect">MediaDirect</a>
         </li>
      </ul>
      <h2>
         <a name="front" id="front">L'avant</a>
      </h2>
      <p>
         À l'avant du boîtier, on trouve sept touches multimédia
         permettant de régler le volume, de couper le son et de
         sauter d'une chanson à l'autre lors de l'écoute de CD
         Audio. De chaque côté de ces boutons se trouvent les
         haut-parleurs intégrés qui produisent un son sommes toutes
         très acceptable. On est loin du système de son haute
         fidélité, mais il ne faut pas s'attendre à trop dans un
         portable! Depuis que j'ai lu sur le forum de Dell qu'il
         arrive de temps en temps que le haut-parleur interne de
         gauche cesse de fonctionner, je le teste de temps en temps
         avec une légère anxiété. Il faut savoir que Dell ne
         parvient pas à effectuer correctement la réparation et que
         ceux qui ont eu ce bogue ont dû bidouiller dans leur
         machine pour le corriger.
      </p>
      <p>
         Détails étranges: il n'y a aucune molette pour régler le
         volume et les touches multimédias ne sont pas directement
         en connexion avec la puce sonore. Par défaut, l'appui sur
         une touche ne fait qu'illuminer en bleu les sept touches
         pendant quelques secondes et diffuser un événement
         normalement intercepté par un pilote sous Windows qui se
         charge d'appliquer l'action appropriée, comme régler le
         volume dans le mixeur logiciel de Windows. Dell QuickSet
         est le seul pilote spécifique à Dell qui doit s'installer
         sur la machine; c'est sans nul doute lui qui gère les
         touches multimédia.
      </p>
      <h2>
         <a name="cover" id="cover">Sous le couvercle</a>
      </h2>
      <p>
         Sous le couvercle se trouvent le clavier, la tablette
         servant de souris et l'écran. Il n'y a aucune molette de
         réglage de la luminosité, car la luminosité peut être
         modifiée dynamiquement par le système lorsque la machine
         commute entre le mode batterie et secteur. Il est possible
         d'ajuster la luminosité avec les touches Fn-flèche haut et
         Fn-flèche bas. Ces touches fonctionnent même sans le
         secours d'un pilote pour Windows.
      </p>
      <p>
         Près de l'écran, on trouve trois diodes qui indiquent
         respectivement l'état d'activité de la machine, l'activité
         du disque dur et le chargement de la batterie. Il y a
         aussi des diodes d'état du clavier (verrouillage
         numérique, des majuscules et du défilement) ainsi qu'une
         diode d'état de la connexion sans fil.
      </p>
      <p>
         La souris est pourvue de deux boutons (gauche et droit),
         le bouton central pouvant être émulé en cliquant sur les
         deux boutons simultanément. Le pointeur se déplace en
         faisant glisser son doigt sur la surface de la tablette,
         mais certaines zones sont dédiées à des fonctions
         particulières, par exemple le défilement du texte dans un
         navigateur Web. Il faut dire que le défilement ne
         fonctionne pas très bien et pratiquement uniquement avec
         Internet Explorer, ce qui en limite grandement l'utilité.
         Sous Linux, c'est même encore pire!
      </p>
      <p>
         Le clavier a quelques particularités bien agaçantes: peu
         d'espace entre les touches F4 et F5 (j'ai repéré une
         démarcation en fin septembre 2006), il arrive souvent
         d'appuyer sur Caps Lock au lieu de Tab, Shift et Enter
         sont faciles à confondre, etc. Après avoir travaillé
         suffisamment longtemps avec la machine pour être habitué
         au clavier, j'ai commencé à entendre de petits craquements
         lors de l'appui sur certaines touches. J'ai également eu
         une touche partiellement bloquée en novembre ou décembre
         2006, End si je me souviens bien. Lorsque j'appuyais
         dessus, elle ne renfonçait pas complètement mais
         provoquait malgré l'action escomptée. J'ai dû appuyer
         dessus suffisamment fort pour l'enfoncer et cela l'a
         débloquée. Le manuel de l'utilisateur indique également
         que les touches du clavier s'enlèvent facilement et les
         remettre en place prend beaucoup de temps. J'espère ne
         jamais avoir à expérimenter cela personnellement. Tous ces
         défauts me mènent à craindre une défaillance éventuelle du
         clavier et avec un peu de malchance, celle-ci arrivera
         <i>après</i> expiration de la garantie...
      </p>
      <h2>
         <a name="left" id="left">Côté gauche</a>
      </h2>
      <p>
         Sur le côté gauche de la machine se trouve une série de
         trous d'aération et le lecteur optique. Le lecteur
         s'utilise presque comme un lecteur de PC, à l'exception
         qu'il faut s'assurer que le disque est bien enclenché
         avant de refermer le plateau et qu'il a tendance à être
         bruyant et même à vibrer. Il n'est donc pas très approprié
         si son usage est destiné à l'écoute de films.
         Heureusement, ce n'est pas mon cas! Fermer le plateau trop
         brusquement peut causer divers désagréments. Par exemple,
         cela m'est arrivé avec mon ancien portable et il était
         devenu très difficile de faire accepter un CD par le
         lecteur. Autre désastre envisageable: le tiroir ne tient
         plus en place et s'ouvre tout le temps. Je ne sais pas si
         c'est possible en pratique, mais la théorie n'exclut pas
         cette possibilité. Il vaut mieux utiliser ce lecteur en
         continu, car il a tendance à stopper sa rotation
         rapidement pour économiser la précieuse batterie tandis
         que sa remise en rotation prend plusieurs secondes pendant
         lesquelles aucune lecteure de données n'est possible. La
         fonction de gravure du lecteur semble standard puisque
         CDRecord, sous Linux, détecte l'unité comme un
         périphérique MMC. Ainsi, il devrait être possible de
         remplacer Sonic, livré avec le portable, par tout autre
         logiciel de gravure. Sonic semble par contre pas si mal à
         prime abord, bien que je ne l'aie pas encore beaucoup
         utilisé.
      </p>
      <h2>
         <a name="right" id="right">Côté droit</a>
      </h2>
      <p>
         Le côté droit de la machine comporte une fente d'expansion
         pour carte <a
         href="http://www.expresscard.org">ExpressCard</a>, le
         lecteur de cartes 5 en 1, les prises audio, deux ports USB
         et un port Firewire. La fente ExpressCard n'est pas très
         utile pour le moment, car il n'y a que peu de cartes
         d'extension ExpressCard disponibles, mais un jour, elle
         pourrait servir. Par exemple, elle pourrait contenir un
         lecteur de cartes CompactFlash, format non supporté par le
         lecteurs 5 en 1 intégré.
      </p>
      <p>
         Tout ce que je sais à propos du lecteur de cartes 5 en 1,
         c'est que sa fente est trop large pour un Memory Stick de
         Sony, mais j'ai pu avec succès lui faire lire une telle
         carte. Dès l'insertion de la carte, le pilote l'a détectée
         et a ajouté un nouveau lecteur à partir duquel je pus
         accéder aux fichiers. Je m'intéresse aux Memory Stick, car
         mes parents disposent d'un appareil-photo numérique Sony
         prenant en charge ce type de support. Mon lecteur de
         cartes pourrait les dépanner en cas de défectuosité de
         l'appareil: au moins, on pourrait récupérer les photos sur
         la carte mémoire. Le manuel indique que ce lecteur peut
         prendre en charge les Memory Stick, les Memory Stick Pro,
         les cartes Secure Digital, xD Picture et les
         MultiMediaCard (MMC). Le lecteur devrait aussi pouvoir
         accueillir les Memory Stick Pro Duo en utilisant un
         adaptateur Duo. Par contre, rien n'indique si le lecteur
         peut écrire sur les cartes prises en charge.
      </p>
      <p>
         Du côté audio, il y a une sortie pour casque d'écoute
         ainsi qu'une entrée pour microphone. Où est donc l'entrée
         ligne? Il n'y en a pas, ai-je pensé, jusqu'au jour où j'ai
         branché mon microphone. Le pilote SigmaTel a alors détecté
         la connexion et m'a demandé de spécifier si ce que je
         venais de brancher était un microphone ou une entrée
         stéréo. Bref, l'entrée peut accepter un microphone, un
         radio-cassettes, etc.
      </p>
      <p>
         Du côté USB, j'ai eu des ratés en février 2007: en fin de
         journée, le port du bas n'acceptait plus ma clé USB
         SanDisk qui, pourtant, avait fonctionné #1 le matin même.
         Après plusieurs déconnexions et reconnexions
         infructueuses, je l'ai insérée dans le port du haut et
         cela a fonctionné parfaitement. Si je branchais la clé
         dans le mauvais port, sa diode d'activité s'allumait,
         s'éteignait et puis plus rien. Si j'enfichais la clé
         partiellement, j'arrivais à maintenir la diode allumée,
         mais Linux ne la détectait jamais! Il semblait donc qu'il
         y ait un problème de contact électrique: le port USB
         envoyait du +5V mais la liaison de données se rompait.
         Étant donné que la clé fonctionnait dans un autre port,
         j'ai cru à un défaut de la carte mère et envisagé avec peu
         d'enthousiasme la nécessité d'envoyer la machine sur la
         garantie pendant que c'était encore possible. Avant, bien
         entendu, je devrais faire des tests additionnels: essayer
         avec d'autres périphériques USB comme ma souris ou mon
         scanner, essayer sous Windows, etc. Mais quelques heures
         après, lorsque j'ai voulu faire ces tests, tout a
         fonctionné parfaitement, et sous Linux! Je ne saurai sans
         doute jamais si c'était la carte mère, Linux, le Diable ou
         tout cela à la fois. Il reste juste à espérer que ce ne
         sera un bogue intermittent.
      </p>
      <h2>
         <a name="back" id="back">Arrière</a>
      </h2>
      <p>
         En arrière, on trouve l'entrée d'alimentation pour
         l'adaptateur AC, la prise réseau, la prise modem, deux
         autres ports USB (qui n'ont pas encore déconné...), la
         prise VGA, la sortie S-Video et d'autres trous d'aération.
         La prise d'entrée électrique est destinée à recevoir
         l'adaptateur AC venant avec la machine et spécifique à
         Dell. Lorsque l'adaptateur reçoit un courant alternatif
         correct, une petite diode verte sur son boîtier s'allume.
         L'adaptateur peut s'accomoder de tous les courants dans le
         monde, la difficulté étant d'obtenir un cordon
         d'alimentation compatible avec la prise dans lequel on
         veut le brancher. En effet, Dell a opté pour un cordon
         avec un connecteur inhabituel plutôt que permettre le
         raccordement avec un cordon pour blocs d'alimentation ATX.
         Il existe heureusement des adaptateurs capables de
         convertir d'une prise à l'autre sans transformer le
         courant. Cette transformation n'est en effet pas
         nécessaire, car l'adaptateur du portable peut la faire
         lui-même. Évidemment, le portable vient avec un cordon
         adapté aux prises canadiennes! Les problèmes apparaissent
         lors de l'utilisation de la machine dans un autre pays, en
         Europe par exemple.
      </p>
      <p>
         La prise S-Video, qui permet de brancher le portable sur
         un téléviseur, a comme particularité qu'il est possible
         d'y brancher un adaptateur probablement exclusif à Dell
         fournissant une sortie composite (fil jaune transmettant
         les trois couleurs) ou composantes (trois fils distincts:
         Y, Pr, Pb) et S/PDIF. Convertir un signal S-Video en
         composite ou, à la limite, en composantes Y (vert ou
         luminosité), Pr (différence entre vert et rouge), Pb
         (différence entre vert et bleu), est certes faisable de
         façon générique (peut-être avec perte de qualité), mais le
         signal S/PDIF exige de faire circuler de l'information
         audio à travers le port S-Video dédié à la vidéo! Cette
         transmission est possible, car le port S-Video comporte
         des connecteurs femelles qui ne correspondent à aucun mâle
         sur un connecteur S-Video ordinaire. Les adaptateurs de
         Dell comportent sans doute des connecteurs mâles pour tous
         les connecteurs femelles du port intégré au portable.
         L'adaptateur n'est pas essentiel pour une simple sortie
         S-Video; j'ai pu afficher avec succès une image du Bureau
         de Windows sur une gros téléviseur de 46" simplement en
         raccordant le portable avec un fil S-Video ordinaire qui
         venait avec ma vieille carte ATI All-In-Wonder 128 Pro qui
         a pris le bord en septembre 2005 et qui dort dans mon
         placard depuis tout ce temps.
      </p>
      <h2>
         <a name="under" id="under">Dessous</a>
      </h2>
      <p>
         Le dessous de la machine comprend différents points
         d'accès qui permettent de retirer la batterie, le disque
         dur, le lecteur optique, etc. Il comporte aussi un bouton
         pour accéder au niveau de charge de la batterie sans
         allumer l'ordinateur. Les instructions pour remplacer bon
         nombre de pièces du portable sont fournies dans le manuel
         de l'utilisateur et la plupart demandent d'ôter des vis
         sous le portable.
      </p>
      <p>
         Le dessous de la machine comprend également des
         informations précieuses comme l'étiquette de service de
         Dell pour le support technique et le numéro de série de
         Windows XP. Ces informations sont écrites en petits
         caractères et il m'a fallu une loupe pour bien lire le
         numéro de série de Windows!
      </p>
      <h2>
         <a name="inside" id="inside">Intérieur</a>
      </h2>
      <p>
         À l'intérieur de la machine se trouve la carte mère que le
         manuel du propriétaire de Dell nomme carte système. Cette
         carte est le système nerveux de l'ordinateur et doit être
         traitée avec soin. L'utilisateur peut accéder à cette
         carte en deux points principaux: par le dessous pour se
         rendre à la mémoire et à la carte mini-PCI servant de
         modem et par le dessus en enlevant le clavier. L'accès par
         le dessus permet de se rendre à la carte mini-PCI de
         réseau sans fil, l'antenne Wi-fi, la liaison avec l'écran,
         une pile-bouton maintenant sans doute le CMOS de la
         machine même en absence de batterie principale et
         peut-être autres choses. Le manuel n'indique pas où se
         trouve le processeur Core Duo et je ne me suis pas
         aventuré à ouvrir le boîtier de cette machine simplement
         pour essayer de le découvrir; cela n'en vaut pas le coup!
      </p>
      <h2>
         <a name="soft" id="soft">Configuration logicielle</a>
      </h2>
      <p>
         La machine comporte un BIOS, comme n'importe quel
         ordinateur moderne, qu'il est possible de paramétrer en
         appuyant sur F2 lors de son démarrage. Les options sont en
         fait peu nombreuses, la plus importante étant la
         possibilité de régler la priorité d'amorçage. Il est
         également possible de désactiver des éléments de la
         machine comme la carte son, la carte Wi-fi, etc.
      </p>
      <p>
         Le disque dur de la machine, préconfiguré par Dell,
         comprend plusieurs partitions que l'utilisateur ne devrait
         normalement pas, selon Dell, modifier. Bien entendu, les
         utilisateurs chevronnés comme moi ne manqueront pas de
         mettre leurs doigts dans l'engrenage... Il y a d'abord une
         première partition primaire d'environ 50Mo contenant un
         utilitaire de diagnostics. Cet utilitaire démarre
         lorsqu'une combinaison de touches (CTRL-F11) est utilisée
         au démarrage de la machine.
      </p>
      <p>
         La seconde partition primaire, au format NTFS, occupe à
         peu près tout l'espace du disque dur et abrite Windows XP.
         Cette partition abrite aussi les données de l'utilisateur.
         Donc, si Windows doit être réinstallé, toutes les données
         sont perdues. Je préfère pour ma part mettre mes données
         sur une partition séparée, ce qui permet de réinstaller
         Windows sans les effacer, mais cette organisation est
         incompatible avec MediaDirect!
      </p>
      <p>
         La troisième partition primaire contient Dell PC Restore,
         le moyen par défaut fourni par Dell pour réparer le
         système d'exploitation en cas de problèmes. Lorsque la
         combinaison CTRL-F12 est maintenue pendant le démarrage de
         l'ordinateur, l'utilisateur se voit offert la possibilité
         de démarrer Dell PC Restore. Cet utilitaire emploie Norton
         Ghost de <a href="http://www.symantec.com">Symantec</a>
         pour restaurer l'état du système à partir d'une image
         stockée sur la partition de PC Restore. La suppression de
         cette partition rend impossible la restauration du
         système. En cas de problème, il faut alors réinstaller
         Windows XP depuis le CD qui n'est pas livré avec le
         portable. Il faut le commander par téléphone chez Dell.
      </p>
      <p>
         L'accès à Dell Diagnostic, à Dell PC Restore ainsi qu'à
         MediaDirect, une autre fonction particulière du portable
         qui sera traitée en détails à la section suivante, dépend
         d'une zone d'amorçage (<i>Master Boot Record</i>, ou MBR)
         spécifique à Dell qu'il faut recréer en cas de
         réinstallation de Windows et qui entre en conflit avec les
         gestionnaires d'amorçage de Linux. Le site <a
         href="http://www.goodells.net/dellutility/">Inside the
         Dell Utility Partition</a> en dit plus long sur ces
         partitions spéciales de Dell.
      </p>
      <h2>
         <a name="mediadirect" id="mediadirect">MediaDirect</a>
      </h2>
      <p>
         Il existe une dernière partition totalement invisible qui
         contient le logiciel MediaDirect. Ce dernier consiste en
         une version allégée de Windows qui démarre lors de l'appui
         sur le bouton MediaDirect du portable. Il permet de lire
         les fichiers multimédias sur le disque dur, les CD Audio
         et les DVD Vidéo. En fait, ce logiciel est plutôt limité,
         car il ne peut lire les fichiers Ogg Vorbis, DivX et
         probablement bien d'autres formats. De plus, les fichiers
         doivent se trouvent sur la partition de Windows XP, non
         pas sur une partition de données secondaire. Étrangement,
         MediaDirect peut voir les CD, DVD, clés USB mais pas
         l'ensemble des partitions FAT32 et NTFS du disque dur!
      </p>
      <p>
         Le fonctionnement de MediaDirect est très obscur et il est
         possible que seul Dell sache exactement comment cette
         fonctionnalité est conçue. Sur <a
         href="http://dozleng.com/internetsecurity/2006/02/16/dell-mediadirect-pc-restore-diagnostic-utility-and-the-hidden-partitions/">Dozleng.com</a>,
         il est écrit que MediaDirect se trouve sur la partition de
         PC Restore. Par contre, supprimer PC Restore ne perturbe
         pas MediaDirect. <a
         href="http://dozleng.com/internetsecurity/category/how-tos/">Un
         autre site</a> indique qu'il est parfois nécessaire de
         réinstaller MediaDirect après avoir formaté le disque dur
         et que cette réinstallation exige de laisser 1038Mo non
         alloués à la fin du disque et qu'il est nécessaire de
         réinstaller Windows pour réinstaller MediaDirect. Par
         contre, sur les nouveaux portables Dell, comme le mien par
         exemple, la partition de MediaDirect n'apparaît pas, car
         elle est cachée dans une zone protégée (<i>Host Protected
         Area</i>, <i>Hidden Protected Area</i> ou simplement HPA).
         Dell stipule qu'il est indispensable d'installer Dell
         QuickSet pour bénéficier de MediaDirect et propose un
         utilitaire pour réparer MediaDirect après une
         réinstallation de Windows. Certains sites parlent
         également d'un CD d'installation de MediaDirect que je
         n'ai pas et qu'il est possible de commander pour restaurer
         le logiciel si sa partition a été endommagée ou absente
         d'un nouveau disque dur ne provenant pas de Dell. Pour
         compliquer, les choses, comme l'indique <a
         href="http://forum.notebookreview.com/showthread.php?t=49086">MediaDirect
         2.0 Overview</a>, il existe plusieurs versions de CD et
         une seule version est compatible avec l'Inspiron 6400!
      </p>
      <p>
         Je ne prétends en aucun cas connaître le secret de
         MediaDirect, mais je vais essayer ici de spéculer sur son
         fonctionnement en utilisant les informations que j'ai
         glanées un peu partout sur Internet et en extrapolant avec
         ce que je ferais, moi, si je voulais implanter cela et que
         je disposais de ressources infinies (temps, argent, etc.)
         pour le faire. Selon moi, MediaDirect a été construit en
         utilisant une installation de Windows XP. Le CD
         d'installation de MediaDirect, sur lequel j'ai réussi à
         mettre la main en utilisant <a
         href="http://amule.sourceforge.net">aMule</a>, comporte
         les fichiers de cette installation. Les fichiers
         principaux sont répartis dans deux archives
         auto-extractables au format ZIP tandis que des fichiers
         additionnels sont spécifiques à la langue d'installation.
         L'installeur a sans doute besoin d'une installation de
         Windows pour recopier les informations de license et
         peut-être d'autres fichiers.
      </p>
      <p>
         L'utilitaire d'installation de MediaDirect place le
         logiciel sur une partition ordinaire qu'il cache en lui
         attribuant le type hexadécimal D7. Par contre, Dell peut,
         avant la livraison de la machine, supprimer cette
         partition D7 et plutôt réduire la capacité effective du
         disque dur: MediaDirect se trouve alors caché dans une
         zone HPA. J'ai essayé pendant longtemps de trouver comment
         accéder à cette zone et il ne semble y avoir aucun moyen,
         du moins générique. Je n'ai trouvé ni utilitaire, ni
         commande Linux, pour y parvenir. J'ai fini par découvrir
         que la HPA était gérée par la commande AT SET MAX. Cette
         commande peut modifier la capacité effective du disque de
         façon temporaire ou permanente. Seul problème: elle n'est
         utilisée par aucun utilitaire de partitionnement ou de
         gestion du disque. Après plusieurs recherches, j'ai
         heureusement découvert que <a
         href="http://www.hdat2.com/">HDAT2</a> permet d'envoyer de
         telles commandes SET MAX.
      </p>
      <p>
         Dell installe sa propre MBR sur le secteur 0 du disque
         dur. Cette MBR particulière peut démarrer la partition de
         diagnostics, Dell PC Restore ou la partition active,
         c'est-à-dire Windows. Bien entendu, Linux ne figure en
         aucun cas dans les données du problème! Comme l'explique
         <a
         href="http://www.goodells.net/dellrestore/mediadirect.htm">GooDells</a>,
         il y a une seconde MBR située sur le quatrième secteur du
         disque dur (LBA-3) et spécialisée pour le démarrage de
         MediaDirect.
      </p>
      <p>
         Lors du démarrage de l'ordinateur avec le bouton normal,
         la MBR de Dell en secteur 0 est exécutée. Elle vérifie
         d'abord si la table des partitions a été modifiée par la
         MBR de MediaDirect et si tel est le cas, elle restaure la
         table et remet la partition de Windows active. En fait, la
         MBR se contente de mettre la seconde partition de la table
         active, supposant que c'est celle-là qui contient Windows.
         Ensuite, si aucune touche n'est enfoncée, le MBR de Dell
         (en secteur 0) amorce la partition active, c'est-à-dire
         celle de Windows XP. Par contre, si CTRL-F12 est enfoncée
         pendant que le code du secteur 0 s'exécute, la MBR démarre
         la partition de PC Restore si elle existe.
      </p>
      <p>
         D'un autre côté, si le bouton MediaDirect est enfoncé, la
         machine amorce le second MBR (LBA-3) qui parcourt la table
         des partitions. Si elle localise la partition D7, la MBR
         la rend active et passe la main à la MBR du secteur 0, ce
         qui démarre bien entendu MediaDirect. Au prochain
         démarrage de l'ordinateur, la MBR du secteur 0 restaurera
         la partition active à celle de Windows. Si aucune
         partition D7 n'est disponible mais que la capacité
         effective du disque est réduite, le code en secteur LBA-3
         envoie une commande AT SetMax pour déverrouiller la HPA
         temporairement; au prochain démarrage, la HPA sera de
         nouveau en place. Il remplace ensuite la dernière
         partition du disque dur par la partition en HPA et la rend
         active avant de passer la main au secteur 0. MediaDirect
         démarre alors sa propre image de Windows.
      </p>
      <p>
         Par contre, il semble exister de nombreuses exceptions à
         la règle générale. Par exemple, si jamais l'ordinateur est
         allumé pour la première fois avec le bouton MediaDirect,
         la partition Dell Diagnostics est active et MediaDirect
         amorce cette partition afin que l'utilisateur lise le
         contrat de license. La lecture du contrat achevée, le code
         sur la partition de Dell remet la partition Windows active
         et démarre Windows, ce qui permet à l'utilisateur de le
         configurer. Un message de Dell QuickSet indiquant que
         MediaDirect n'a pas pu démarrer finit alors par
         apparaître. C'est cela qui m'est arrivé, en tout cas. De
         même, si la MBR en secteur 0 est remplacée par la MBR
         standard de Microsoft ou celle d'un autre gestionnaire
         d'amorçage, il semble que la MBR en secteur 3 se contente
         de passer la main à la MBR en secteur 0 sans faire quoi
         que ce soit. Ce passage est nécessaire pour expliquer
         certains dysfonctionnements que j'ai observés au cours de
         mes analyses.
      </p>
      <p>
         Au premier démarrage de MediaDirect, l'utilisateur doit
         attendre que la version allégée de Windows se charge au
         complet. Les concepteurs de l'application ont fait du bon
         travail, car ils ont caché le logo de Windows et l'ont
         remplacé par leur propre message qui invite à patienter.
         Après un certain temps, MediaDirect est prêt.
         L'utilisateur peut alors écouter de la musique ou
         visionner des films. Au moment de quitter, MediaDirect
         n'éteint pas Windows mais le place plutôt en mode
         d'hibernation. Ainsi, le prochain démarrage est très
         rapide, pratiquement instantané.
      </p>
      <p>
         Dernier détail intéressant: Dell QuickSet peut détecter si
         l'utilisateur a allumé la machine avec le bouton
         MediaDirect et, si tel est le cas, il affiche un message
         indiquant que MediaDirect n'est pas installé. En effet, si
         MediaDirect est correctement configuré, la machine ne
         devrait pas aboutir sous Windows après l'appui sur le
         bouton MediaDirect. QuickSet gère aussi le bouton
         MediaDirect: à l'appui sur ce dernier, il tente de
         démarrer Media Experience (pas autre chose!) ou affiche un
         message d'erreur s'il n'est pas installé. Dans mon cas, je
         n'ai pu obtenir que le message d'erreur.
      </p>
      <p>
         Mais si je devais reconcevoir MediaDirect depuis rien,
         j'opterais pour une architecture beaucoup moins obscure et
         surtout, je la documenterais! La MBR contiendrait une
         version modifiée de <a
         href="http://www.gnu.org/software/grub">GRUB</a>, le
         gestionnaire d'amorçage de Linux, capable de réagir aux
         touches du clavier. MediaDirect se trouverait sur une
         partition primaire tout à fait ordinaire qui serait
         amorcée si GRUB détectait que la machine était allumée
         avec le bon bouton. Bien entendu, une procédure serait
         disponible sur Internet pour reconfigurer et même
         personnaliser le mécanisme. Par exemple, certains
         pourraient vouloir remplacer la version allégée de Windows
         par une version allégée de Linux. Cette stratégie pourrait
         même être employée par une entreprise si l'utilisation
         d'une version allégée de Windows pose trop de problèmes de
         license.
      </p>
      <p>
         Autre solution: intégrer MediaDirect sur une mémoire flash
         et incorporer le mécanisme de démarrage dans le BIOS. Cela
         empêche la personnalisation, mais au moins, la solution ne
         pose aucun problème avec Linux.
      </p>
      <div class="footer">
         <a href="http://validator.w3.org/check?uri=referer"><img
         src="http://www.w3.org/Icons/valid-xhtml10"
         alt="Valid XHTML" height="31" width="88" /></a><a
         href="http://jigsaw.w3.org/css-validator/check/referer"><img
          src="http://jigsaw.w3.org/css-validator/images/vcss"
         alt="Valid CSS" height="31" width="88" /></a>
      </div>
   </body>
</html>

