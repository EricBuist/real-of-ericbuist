<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta name="generator"
      content="HTML Tidy for Java (vers. 2009-12-01), see jtidy.sourceforge.net" />
      <title>
         Tests de performance
      </title>
      <meta http-equiv="Content-Type"
      content="application/xhtml+xml; charset=UTF-8" />
      <meta name="author" content="Eric Buist" />
      <meta name="viewport"
      content="width=device-width, initial-scale=1.0" />
      <meta name="HandheldFriendly" content="true" />
      <link rel="stylesheet" type="text/css"
      href="../../main.css" />
   </head>
   <body>
      <table class="topnavbar" width="100%">
         <tr>
            <td class="parents" colspan="3">
               <a href="../../index.xhtml" class="parents">Le
               royaume de Eric Buist</a> &gt;&gt; <a
               href="../index.xhtml"
               class="parents">Informatique</a> &gt;&gt;
               Configuration informatique &gt;&gt; <a
               href="index.xhtml" class="parents">Le Salvator,
               successeur du Faucon de Fer</a>
            </td>
         </tr>
         <tr>
            <td class="contact">
               <a href="../../contact.xhtml" class="contact">Me
               contacter</a>
            </td>
            <td class="topnavbar">
            </td>
            <td class="sitemap">
               <a href="../../sitemap.xhtml" class="sitemap">Plan
               du site</a>
            </td>
         </tr>
         <tr>
            <td class="leftsibling">
               &lt;&lt; <a href="lin.xhtml"
               class="leftsibling">Installation de Linux Fedora
               Core 4</a>
            </td>
            <td class="thispage">
               Tests de performance
            </td>
            <td class="rightsibling">
               <a href="conclusion.xhtml"
               class="rightsibling">Conclusion</a> &gt;&gt;
            </td>
         </tr>
      </table>
      <h1>
         Tests de performance
      </h1>
      <p>
         Ai-je réellement gagné quelque chose en remplaçant ma
         machine, outre d'innombrables possibilités de problèmes?
         Pour essayer de répondre à cette question, j'ai exécuté
         divers tests et calculé le temps de traitement nécessaire.
      </p>
      <ul>
         <li>
            <a href="#boot">Amorçage</a>
         </li>
         <li>
            <a href="#java">Programmes Java</a>
         </li>
         <li>
            <a href="#compress">Compression de données</a>
         </li>
         <li>
            <a href="#graphic">Carte graphique</a>
         </li>
         <li>
            <a href="#sandra">SiSoftware Sandra</a>
         </li>
      </ul>
      <h2>
         <a name="boot" id="boot">Amorçage</a>
      </h2>
      <p>
         Tout d'abord, il se passe environ vingt secondes entre le
         moment où j'appuie sur le bouton de mise sous tension et
         celui où GRUB apparaît. Il se passe environ vingt secondes
         entre le moment où je choisis Windows XP dans le menu de
         GRUB et celui où l'écran de bienvenue apparaît. Il faut
         ensuite environ trente-deux secondes pour que le le Bureau
         apparaisse et soit utilisable. Windows prend donc environ
         52 secondes à démarrer au total.
      </p>
      <p>
         Dans le cas de Linux, il faut malheureusement environ une
         minute neuf secondes pour passer de la sélection de Linux
         dans GRUB au moment où l'écran de branchement s'affiche.
         Ensuite, environ treize secondes sont nécessaire pour
         passer de l'écran de branchement au bureau de GNOME prêt à
         l'emploi. Le démarrage prend ainsi 1min22s dans le cas de
         Linux. Le temps de chargement de Windows est certes plus
         court, mais il faut considérer que lorsque le Bureau
         apparaît, absolument rien ne réagit pendant une bonne
         dizaine de secondes, le temps que les services secondaires
         se chargent. Dans le cas de Linux, tous les services se
         chargent avant l'apparition de l'écran de branchement. Au
         total, le temps de chargement est à peu près le même.
      </p>
      <h2>
         <a name="java" id="java">Programmes Java</a>
      </h2>
      <p>
         Pour tester la vitesse d'exécution de programmes, j'ai
         utilisé les exemples de centres de contacts que j'avais
         construits dans le cadre de mon projet de maîtrise. Les
         programmes ont tous été exécutés sous l'implémentation de
         Sun de l'environnement Java 1.5. Dans le cas du Salvator,
         une machine virtuelle 64 bits a été utilisée pour les
         tests tandis qu'une machine virtuelle de 32 bits a été
         employée pour le Faucon de Fer.
      </p>
      <center>
         <table border="true">
            <tr>
               <th>
                  Nom de l'exemple
               </th>
               <th>
                  Faucon de Fer
               </th>
               <th>
                  Salvator
               </th>
               <th>
                  Rapport
               </th>
            </tr>
            <tr>
               <td>
                  Telethon
               </td>
               <td>
                  7s
               </td>
               <td>
                  4s
               </td>
               <td>
                  2.25
               </td>
            </tr>
            <tr>
               <td>
                  Bilingual
               </td>
               <td>
                  37s
               </td>
               <td>
                  17s
               </td>
               <td>
                  2.18
               </td>
            </tr>
            <tr>
               <td>
                  Bank
               </td>
               <td>
                  40s
               </td>
               <td>
                  16s
               </td>
               <td>
                  2.5
               </td>
            </tr>
            <tr>
               <td>
                  Teamwork
               </td>
               <td>
                  1min30s
               </td>
               <td>
                  45s
               </td>
               <td>
                  2
               </td>
            </tr>
         </table>
      </center>
      <p>
         Le tableau précédent montre que la vitesse d'exécution a
         plus que doublé par rapport à la machine précédente. Il
         est dommage que ces programmes ne soient pas multithreads,
         car la différence de performance aurait sans doute été
         encore plus grande en raison du processeur à double coeur
         de ma nouvelle machine.
      </p>
      <p>
         Maintenant, est-ce que le 64 bits apporte un gain de
         vitesse important? Pour tenter de le découvrir, j'ai
         exécuté les mêmes programmes sur une machine virtuelle 32
         bits. Je ne m'attendais pas à une grande différence de
         performance, car ces programmes utilisent davantage des
         valeurs en points flottants que des entiers. Pourtant,
         comme le montre le tableau suivant, le même programme
         tourne environ 1.25 fois plus vite sur une machine
         virtuelle 64 bits que sur la même machine, version 32
         bits.
      </p>
      <center>
         <table border="true">
            <tr>
               <th>
                  Nom de l'exemple
               </th>
               <th>
                  JVM 32 bits
               </th>
               <th>
                  JVM 64 bits
               </th>
               <th>
                  Rapport
               </th>
            </tr>
            <tr>
               <td>
                  Telethon
               </td>
               <td>
                  4s
               </td>
               <td>
                  4s
               </td>
               <td>
                  1
               </td>
            </tr>
            <tr>
               <td>
                  Bilingual
               </td>
               <td>
                  21s
               </td>
               <td>
                  17s
               </td>
               <td>
                  1.24
               </td>
            </tr>
            <tr>
               <td>
                  Bank
               </td>
               <td>
                  20s
               </td>
               <td>
                  16s
               </td>
               <td>
                  1.25
               </td>
            </tr>
            <tr>
               <td>
                  Teamwork
               </td>
               <td>
                  56s
               </td>
               <td>
                  45s
               </td>
               <td>
                  1.25
               </td>
            </tr>
         </table>
      </center>
      <p>
         Malheureusement, c'est avec tristesse que je dus constater
         que pour certaines tâches, un processeur AMD est nettement
         supérieur à un processeur Intel. Prenons par exemple
         l'Athlon 4800+ x2 (2.4GHz, 1Mo de cache) qui se trouve sur
         le serveur Gigot à l'Université de Montréal. Le tableau
         suivant compare les résultats des mêmes programmes de
         simulation avec ceux obtenus sur le Salvator.
      </p>
      <center>
         <table border="true">
            <tr>
               <th>
                  Nom de l'exemple
               </th>
               <th>
                  Salvator
               </th>
               <th>
                  Gigot
               </th>
               <th>
                  Rapport
               </th>
            </tr>
            <tr>
               <td>
                  Telethon
               </td>
               <td>
                  4s
               </td>
               <td>
                  2s
               </td>
               <td>
                  2
               </td>
            </tr>
            <tr>
               <td>
                  Bilingual
               </td>
               <td>
                  17s
               </td>
               <td>
                  10s
               </td>
               <td>
                  1.7
               </td>
            </tr>
            <tr>
               <td>
                  Bank
               </td>
               <td>
                  16s
               </td>
               <td>
                  10ss
               </td>
               <td>
                  1.6
               </td>
            </tr>
            <tr>
               <td>
                  Teamwork
               </td>
               <td>
                  45s
               </td>
               <td>
                  24s
               </td>
               <td>
                  1.9
               </td>
            </tr>
         </table>
      </center>
      <p>
         C'est d'autant plus regrettable que l'exécution de
         programmes de simulation de ce genre est une tâche
         courante pour moi.
      </p>
      <h2>
         <a name="compress" id="compress">Compression de
         données</a>
      </h2>
      <p>
         Pour tester la vitesse d'exécution d'une compression de
         données dans le but d'effectuer une sauvegarde, je choisis
         un répertoire contenant beaucoup de fichiers et je le
         compressai en format ZIP avec <a
         href="http://www.7-zip.org/">7-Zip</a> version 4.30 pour
         Linux. J'utilisai la commande Linux <tt>time</tt> pour
         évaluer la durée de l'opération avec précision. Puisque
         7-Zip est un programme multithreads, le facteur de
         performance devrait être supérieur à ceux de mes
         programmes Java. Sur le Faucon de Fer, la compression de
         ce répertoire de 36Mo nécessita au total 1min28s. Pour
         effectuer cette tâche, le processeur travailla pendant
         28s. Ainsi, seulement 32% du temps de traitement était
         consacré à la véritable compression, le reste étant sans
         doute consacré aux entrées/sorties sur le disque dur! Avec
         une version de 7-Zip recompilée pour x86_64 et s'exécutant
         sur Salvator, le temps total de traitement se réduisit à
         11s, ce qui est huit fois supérieur au Faucon de Fer! Il
         faut dire que cela me surprit beaucoup, car je me serais
         attendu à un facteur 3. Pendant cette compression, le
         processeur travailla 9s, donc 82% de temps. Ainsi, le
         temps des entrées/sorties a été réduit en plus du temps de
         processeur. Cela laisse croire qu'en ajoutant une carte
         contrôleur ATA/133 dans le Faucon de Fer, il serait
         possible d'en augmenter sa performance d'une façon
         significative.
      </p>
      <p>
         Pour transférer le fichier compressé d'une taille de 23Mo
         sur ma clé USB, il fallut 25s avec le Faucon de Fer. Avec
         Salvator, l'opération se fit en 4s. Cette radicale
         amélioration est due au fait que la nouvelle machine,
         contrairement à l'ancienne, prend USB 2.0 en charge.
      </p>
      <h2>
         <a name="graphic" id="graphic">Carte graphique</a>
      </h2>
      <p>
         Après avoir installé le pilote de NVIDIA sous Linux, je
         testai <tt>glxgears</tt> et constatai que la carte
         graphique pouvait produire, sous Linux, environ 3&nbsp;870
         images par seconde, ce qui était presque quatre fois
         supérieur à mon ancienne carte. Cela se tient, car ma
         GeForce FX 5200 était sur un bus AGP 4X (bien qu'elle
         puisse faire du 8X) avec un taux de transfert d'environ
         1Go/s. Avec une carte PCI Express x16, le taux de
         transfert grimpe à 4Go/s, soit quatre fois plus.
      </p>
      <p>
         Pour raffiner les tests, je tentai d'utiliser le logiciel
         <a href="http://www.futuremark.com/">3DMark</a> qui permet
         d'évaluer la performance de la carte graphique lors de
         l'exécution de jeux. J'utilisai 3DMark 2005 avec les
         réglages par défaut. Avec la résolution 1024x768, j'obtins
         un score de 2&nbsp;060. En abaissant la résolution à
         800x600, je pus faire grimper le score à 2&nbsp;418. Avec
         une résolution de 640x480, j'obtins 2&nbsp;675 3DMarks.
         3DMarks parvint à produire 15 images complexes par
         seconde, mais la cadence baissait parfois à 7 ou 8 images.
         Lors des tests sans accélération 3D, uniquement avec le
         processeur, 3DMarks ne parvint à générer qu'environ 2
         images par seconde. Pour un affichage visuellement fluide,
         il faudrait atteindre au moins 20 images par seconde,
         sinon 30. La carte graphique y aide, mais elle ne suffit
         pas, même dans la résolution minimale de 640x480. Cela
         montre que la carte graphique choisie ne serait pas
         suffisante pour des jeux complexes et totalement 3D.
         Heureusement, je ne joue pas à ce genre de jeux!
      </p>
      <p>
         Malheureusement, je ne pus pas exécuter le logiciel sur
         mon ancienne machine, car ce dernier refusa de s'installer
         en raison de l'absence du SSE sur mon processeur.
      </p>
      <h2>
         <a name="sandra" id="sandra">SiSoftware Sandra</a>
      </h2>
      <p>
         J'utilisai également le logiciel <a
         href="http://www.sisoftware.com">SiSoftware</a> Sandra
         2005 Service Pack 3 Lite pour comparer la performance des
         deux machines. Comme le montre le tableau suivant, les
         tests du processeurs montrèrent que le nombre
         d'instructions par seconde pouvant être traitées a environ
         quadruplé d'une machine à l'autre. Cette même
         multiplication de performance peut être observée avec le
         multimédia (MMX), car le nombre d'instructions par seconde
         augmente encore une fois.
      </p>
      <center>
         <table border="true">
            <tr>
               <th>
                  Test
               </th>
               <th>
                  Faucon de Fer
               </th>
               <th>
                  Salvator
               </th>
               <th>
                  Rapport
               </th>
            </tr>
            <tr>
               <td>
                  Dhrystone
               </td>
               <td>
                  4 020 MIPS
               </td>
               <td>
                  15 151 MIPS
               </td>
               <td>
                  3.77
               </td>
            </tr>
            <tr>
               <td>
                  Whetstone
               </td>
               <td>
                  1 534 MFLOPS
               </td>
               <td>
                  7 108 MFLOPS
               </td>
               <td>
                  4.63
               </td>
            </tr>
            <tr>
               <td>
                  Entiers MMX
               </td>
               <td>
                  9 284 it/s
               </td>
               <td>
                  31 532 it/s
               </td>
               <td>
                  3.34
               </td>
            </tr>
            <tr>
               <td>
                  Flottants MMX
               </td>
               <td>
                  10 360 it/s
               </td>
               <td>
                  37 431 it/s
               </td>
               <td>
                  3.61
               </td>
            </tr>
         </table>
      </center>
      <p>
         Le taux de transfert des fichiers sur le disque dur subit
         également une nette augmentation, comme le montre le
         tableau suivant.
      </p>
      <center>
         <table border="true">
            <tr>
               <th>
                  Test
               </th>
               <th>
                  Faucon de Fer
               </th>
               <th>
                  Salvator
               </th>
               <th>
                  Rapport
               </th>
            </tr>
            <tr>
               <td>
                  Indice combiné
               </td>
               <td>
                  46 413 opérations/s
               </td>
               <td>
                  120 931 opérations/s
               </td>
               <td>
                  2.6
               </td>
            </tr>
            <tr>
               <td>
                  Indice Lecteur
               </td>
               <td>
                  29MB/s
               </td>
               <td>
                  47MB/s
               </td>
               <td>
                  1.62
               </td>
            </tr>
         </table>
      </center>
      <p>
         Comme le montre le tableau suivant, le taux de transfert
         de la mémoire a également grimpé de façon importante. Ceci
         s'explique par la fréquence de 533MHz de la mémoire du
         Salvator comparativement à 133MHz sur le Faucon de Fer.
      </p>
      <center>
         <table border="true">
            <tr>
               <th>
                  Test
               </th>
               <th>
                  Faucon de Fer
               </th>
               <th>
                  Salvator
               </th>
               <th>
                  Rapport
               </th>
            </tr>
            <tr>
               <td>
                  Largeur de bande
               </td>
               <td>
                  973 MB/s
               </td>
               <td>
                  4 902 MB/s
               </td>
               <td>
                  5.04
               </td>
            </tr>
            <tr>
               <td>
                  Mémoire et cache
               </td>
               <td>
                  1 696 MB/s
               </td>
               <td>
                  8 454 MB/s
               </td>
               <td>
                  4.98
               </td>
            </tr>
         </table>
      </center>
      <p>
         Le taux de transfert réseau reste quant à lui assez
         semblable. La faible bande passante Internet sur le Faucon
         de Fer est peut-être due à un programme parasite qui
         téléchargeait quelque chose pendant le test, par exemple
         des mises à jour automatiques Microsoft.
      </p>
      <center>
         <table border="true">
            <tr>
               <th>
                  Test
               </th>
               <th>
                  Faucon de Fer
               </th>
               <th>
                  Salvator
               </th>
               <th>
                  Rapport
               </th>
            </tr>
            <tr>
               <td>
                  Transfert réseau
               </td>
               <td>
                  8 MB/s
               </td>
               <td>
                  10 MB/s
               </td>
               <td>
                  1.25
               </td>
            </tr>
            <tr>
               <td>
                  Bande passante Internet
               </td>
               <td>
                  130 kB/s
               </td>
               <td>
                  5 MB/s
               </td>
               <td>
                  38
               </td>
            </tr>
         </table>
      </center>
      <p>
         En conclusion, la nouvelle machine est nettement plus
         performante que l'ancienne.
      </p>
      <div class="footer">
         <a href="http://validator.w3.org/check?uri=referer"><img
         src="http://www.w3.org/Icons/valid-xhtml10"
         alt="Valid XHTML" height="31" width="88" /></a><a
         href="http://jigsaw.w3.org/css-validator/check/referer"><img
          src="http://jigsaw.w3.org/css-validator/images/vcss"
         alt="Valid CSS" height="31" width="88" /></a>
      </div>
   </body>
</html>

